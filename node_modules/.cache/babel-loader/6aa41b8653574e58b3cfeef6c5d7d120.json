{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\greha\\\\OneDrive\\\\Desktop\\\\Capstone\\\\app22-10\\\\frontend\\\\src\\\\components\\\\DonationDetails.js\";\n// src/components/DonationDetails.js\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nconst DonationDetails = ({\n  donation,\n  currentUserId\n}) => {\n  const [initialMessage, setInitialMessage] = useState(\"\");\n  const navigate = useNavigate();\n  const handleSendMessage = async () => {\n    if (!initialMessage.trim()) return; // Prevent empty messages\n\n    try {\n      // Sending initial message to create a chat in the database\n      await axios.post('/api/chats', {\n        sender: currentUserId,\n        // donee ID\n        receiver: donation.donorId,\n        // donor ID from donation data\n        message: initialMessage,\n        donationId: donation._id // Pass donationId\n      });\n\n      // Clear the text box after sending\n      setInitialMessage(\"\");\n\n      // Redirect to chat page after sending the first message\n      navigate(`/chat/${donation.donorId}/${donation._id}`); // Pass donationId in the URL\n    } catch (error) {\n      console.error(\"Error initiating chat:\", error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, donation.itemName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, donation.description), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, \"Category: \", donation.category), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, \"Location: \", donation.location), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, \"Status: \", donation.status), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Type your message...\",\n    value: initialMessage,\n    onChange: e => setInitialMessage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, \"Send Message\"));\n};\nexport default DonationDetails;","map":{"version":3,"names":["React","useState","axios","useNavigate","DonationDetails","donation","currentUserId","initialMessage","setInitialMessage","navigate","handleSendMessage","trim","post","sender","receiver","donorId","message","donationId","_id","error","console","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","itemName","description","category","location","status","placeholder","value","onChange","e","target","onClick"],"sources":["C:/Users/greha/OneDrive/Desktop/Capstone/app22-10/frontend/src/components/DonationDetails.js"],"sourcesContent":["// src/components/DonationDetails.js\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst DonationDetails = ({ donation, currentUserId }) => {\r\n  const [initialMessage, setInitialMessage] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!initialMessage.trim()) return; // Prevent empty messages\r\n\r\n    try {\r\n      // Sending initial message to create a chat in the database\r\n      await axios.post('/api/chats', {\r\n        sender: currentUserId, // donee ID\r\n        receiver: donation.donorId, // donor ID from donation data\r\n        message: initialMessage,\r\n        donationId: donation._id // Pass donationId\r\n      });\r\n\r\n      // Clear the text box after sending\r\n      setInitialMessage(\"\");\r\n\r\n      // Redirect to chat page after sending the first message\r\n      navigate(`/chat/${donation.donorId}/${donation._id}`); // Pass donationId in the URL\r\n    } catch (error) {\r\n      console.error(\"Error initiating chat:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{donation.itemName}</h2>\r\n      {/* Other donation details */}\r\n      <p>{donation.description}</p>\r\n      <p>Category: {donation.category}</p>\r\n      <p>Location: {donation.location}</p>\r\n      <p>Status: {donation.status}</p>\r\n\r\n      {/* Text box and Send Message button */}\r\n      <textarea\r\n        placeholder=\"Type your message...\"\r\n        value={initialMessage}\r\n        onChange={(e) => setInitialMessage(e.target.value)}\r\n      />\r\n      <button onClick={handleSendMessage}>Send Message</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DonationDetails;\r\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,eAAe,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAc,CAAC,KAAK;EACvD,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAMQ,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAACH,cAAc,CAACI,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC;;IAEpC,IAAI;MACF;MACA,MAAMT,KAAK,CAACU,IAAI,CAAC,YAAY,EAAE;QAC7BC,MAAM,EAAEP,aAAa;QAAE;QACvBQ,QAAQ,EAAET,QAAQ,CAACU,OAAO;QAAE;QAC5BC,OAAO,EAAET,cAAc;QACvBU,UAAU,EAAEZ,QAAQ,CAACa,GAAG,CAAC;MAC3B,CAAC,CAAC;;MAEF;MACAV,iBAAiB,CAAC,EAAE,CAAC;;MAErB;MACAC,QAAQ,CAAC,SAASJ,QAAQ,CAACU,OAAO,IAAIV,QAAQ,CAACa,GAAG,EAAE,CAAC,CAAC,CAAC;IACzD,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD;EACF,CAAC;EAED,oBACEnB,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACE3B,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAKtB,QAAQ,CAACuB,QAAa,CAAC,eAE5B5B,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAItB,QAAQ,CAACwB,WAAe,CAAC,eAC7B7B,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,YAAU,EAACtB,QAAQ,CAACyB,QAAY,CAAC,eACpC9B,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,YAAU,EAACtB,QAAQ,CAAC0B,QAAY,CAAC,eACpC/B,KAAA,CAAAqB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,UAAQ,EAACtB,QAAQ,CAAC2B,MAAU,CAAC,eAGhChC,KAAA,CAAAqB,aAAA;IACEY,WAAW,EAAC,sBAAsB;IAClCC,KAAK,EAAE3B,cAAe;IACtB4B,QAAQ,EAAGC,CAAC,IAAK5B,iBAAiB,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACpD,CAAC,eACF3B,KAAA,CAAAqB,aAAA;IAAQiB,OAAO,EAAE5B,iBAAkB;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAoB,CACrD,CAAC;AAEV,CAAC;AAED,eAAevB,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module"}